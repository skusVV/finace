<app-header
  [userName]="userName | async"
  (logout)="logout()"
  title="Dashboard"></app-header>

<mat-sidenav-container class="dashboard">
  <mat-sidenav class="dashboard_sidebar"
               #sidenav mode="side"
               [(opened)]="sidebarOpened">
    <div class="mat-drawer-inner-container">
      <app-categories-list
        [categories]="categories | async"
        (deleteCategory)="onDeleteCategory($event)"
        [selectedCategory]="selectedCategory | async"
        (selectCategory)="selectCategory($event)"
        (addNewCategory)="addNewCategory()"></app-categories-list>
      <!--TODO made common payment-->
      <!--<button mat-flat-button-->
              <!--color="primary"-->
              <!--(click)="addNewPayment()">Distribute payment between categories</button>-->
    </div>
  </mat-sidenav>
  <mat-sidenav-content class="dashboard_content">
    <div class="dashboard_content_controls">
      <div>
      <button mat-button (click)="toggleSidebar()">
        <mat-icon *ngIf="sidebarOpened" matTooltip="Hide sidebar">arrow_back</mat-icon>
        <mat-icon *ngIf="!sidebarOpened" matTooltip="Show sidebar">arrow_forward</mat-icon>
      </button>
        <button mat-flat-button
                color="primary"
                *ngIf="!!(selectedCategory | async)"
                (click)="visualizeCategory()">Visualize category</button>
      </div>
      <button mat-flat-button
              color="primary"
              *ngIf="!!(selectedCategory | async)"
              (click)="addNewPayment()">Add payment</button>
    </div>
    <div class="dashboard_content_info">
      <div class="dashboard_content_info_main">
        <app-payment *ngIf="!!(selectedPayment | async)"
                     [payment]="selectedPayment | async"
                     (updatePayment)="onUpdatePayment($event)"
                     (deletePayment)="onDeletePayment($event)">
        </app-payment>
      </div>
      <app-payment-list class="dashboard_payment_list"
                          *ngIf="!!(payments | async)"
                          [payments]="payments | async"
                          (selectPayment)="selectPayment($event)">
      </app-payment-list>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
